{"version":3,"sources":["app-state.js","client.js","components/MovieSearchInput.js","utils.js","components/RoomCreateForm.js","components/RoomJoinForm.js","components/RoundQuestionCard.js","components/UserList.js","components/RoomScore.js","documents.js","components/MovieSearch.js","components/RoundScore.js","components/RoundSummary.js","components/Round.js","components/Room.js","components-with-mocks.js","pages/HomePage.js","pages/RoomCreatePage.js","pages/RoomJoinPage.js","pages/RoomPage.js","ProtectedRoute.js","index.js"],"names":["StateContext","React","createContext","StateProvider","_ref","children","history","useHistory","_useState","useState","_useState2","Object","slicedToArray","user","setUser","useEffect","push","concat","room","name","react_default","a","createElement","Provider","value","httpLink","HttpLink","uri","wsLink","WebSocketLink","options","reconnect","link","split","query","definition","getMainDefinition","kind","operation","client","ApolloClient","cache","InMemoryCache","MovieSearchInput","_ref$onSelect","onSelect","console","log","setValue","results","R","x","title","length","L","includes","movies","placeholder","onChange","e","target","className","slice","map","result","ix","onClick","replace","key","year","computeScore","response","answer","Math","abs","RoomCreateForm","handleSubmit","handleCancel","setName","code","random","toString","substr","toUpperCase","onSubmit","htmlFor","id","type","RoomJoinForm","setCode","_useState3","_useState4","j","RoundQuestionCard","description","userId","imgSrc","style","height","src","overflowY","preventDefault","variables","questionId","UserList","data","responses","answered","owner","cls","RoomScore","JOIN_ROOM_MUTATION","gql","_templateObject","SUBSCRIBE_TO_ROOM_BY_NAME","_templateObject2","_templateObject3","_templateObject4","_templateObject5","_templateObject6","ROOM_BY_NAME_QUERY","_templateObject7","SUBMIT_RESPONSE_FOR_QUESTION","_templateObject8","_templateObject9","CREATE_ROOM_MUTATION","_templateObject10","_templateObject11","SUBMIT_QUESTION_MUTATION","_templateObject12","NEXT_ROUND_MUTATION","_templateObject13","MovieSearch","roomId","_useMutation","useMutation","docs","submitQuestion","components_MovieSearchInput","fetch","searchUrl","then","_ref2","asyncToGenerator","regenerator_default","mark","_callee","resp","json","wrap","_context","prev","next","sent","imageUrl","poster","reception","stop","_x","apply","this","arguments","catch","err","error","Score","prefix","textColor","RoundResult","score","r","i","RoundScore_Score","RoundSummary","onNextRound","onEndGame","Fragment","RoundScore","Round","nUsers","useContext","roundOver","setRoundOver","nextRound","_useMutation3","submitResponse","userResponse","components_RoundSummary","rottenTomatoes","components_RoundQuestionCard","components_MovieSearch","Room","questions","components_Round","round","users","components_RoomScore","components_UserList","ComponentsWithMocks","react_router","path","component","components_Room","HomePage","state","setState","RoomCreatePage","userName","undefined","roomCode","_useMutation2","createRoom","roomCreated","roomName","insert_user","returning","components_RoomCreateForm","RoomJoinPage","_useLazyQuery","useLazyQuery","_useLazyQuery2","queryRoom","roomQuery","joinRoom","roomJoined","loading","components_RoomJoinForm","RoomPage","match","params","useSubscription","ProtectedRoute","Comp","loggedIn","rest","objectWithoutProperties","assign","render","props","to","Routes","exact","pages_HomePage","components_with_mocks","src_ProtectedRoute","rootElement","document","getElementById","ReactDOM","react_common_esm","react_router_dom","basename","app_state_StateProvider","src_Routes"],"mappings":"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","file":"static/js/main.bc60353d.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\nexport const StateContext = React.createContext();\n\nexport const StateProvider = ({ children }) => {\n  const history = useHistory();\n  const [user, setUser] = useState();\n  useEffect(() => {\n    if (user) {\n      history.push(`/room/${user.room.name}`);\n    }\n  }, [user]);\n  return (\n    <StateContext.Provider value={{ user, setUser }}>\n      {children}\n    </StateContext.Provider>\n  );\n};\n","import { split } from \"apollo-link\";\nimport { HttpLink } from \"apollo-link-http\";\nimport { WebSocketLink } from \"apollo-link-ws\";\nimport { getMainDefinition } from \"apollo-utilities\";\nimport { ApolloClient } from \"apollo-client\";\nimport { InMemoryCache } from \"apollo-cache-inmemory\";\n\n// Create an http link:\nconst httpLink = new HttpLink({\n  uri: \"https://graphql-number-guessing-game.herokuapp.com/v1/graphql\"\n});\n\n// Create a WebSocket link:\nconst wsLink = new WebSocketLink({\n  uri: `wss://graphql-number-guessing-game.herokuapp.com/v1/graphql`,\n  options: {\n    reconnect: true\n  }\n});\n\n// using the ability to split links, you can send data to each link\n// depending on what kind of operation is being sent\nconst link = split(\n  // split based on operation type\n  ({ query }) => {\n    const definition = getMainDefinition(query);\n    return definition.kind === \"OperationDefinition\" && definition.operation === \"subscription\";\n  },\n  wsLink,\n  httpLink\n);\n\nconst client = new ApolloClient({\n  link,\n  cache: new InMemoryCache()\n  // for SSR, use:\n  // cache: new Cache().restore(window.__APOLLO_STATE__ || {})\n});\n\nexport default client;\n","import * as L from \"partial.lenses\";\nimport * as R from \"ramda\";\nimport React, { useState } from \"react\";\nimport movies from \"../movies\";\n\nconst MovieSearchInput = ({ onSelect = console.log }) => {\n  const [value, setValue] = useState();\n  const results = R.sortWith(\n    [\n      R.ascend(x => (x.title.length === value.length ? 0 : 1)),\n      R.descend(R.prop(\"year\"))\n    ],\n    L.collect(\n      [\n        L.satisfying(\n          R.where({\n            title: x => x && value && R.toLower(x).includes(R.toLower(value))\n            //year: R.equals(2006)\n            //cast: x => x && R.contains(\"Brad Pitt\", x)\n          })\n        )\n      ],\n      movies\n    )\n  );\n  return (\n    <div>\n      <input\n        placeholder=\"Search movie titles...\"\n        value={value}\n        onChange={e => setValue(e.target.value)}\n      />\n      <div\n        className={`absolute bg-gray-100 text-gray-600 rounded-lg shadow-xl h-64 overflow-y-scroll w-64 ${\n          results.length === 0 ? \"hidden\" : \"block\"\n        }`}\n      >\n        <ul>\n          {results.slice(0, 15).map((result, ix) => {\n            return (\n              <li\n                onClick={() => onSelect(result.link.replace(\"/wiki/\", \"\"))}\n                key={ix}\n                className=\"hover:bg-indigo-600 w-full hover:text-white px-2\"\n              >\n                {result.title} ({result.year})\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nexport default MovieSearchInput;\n","export const generateCode = () =>\n  Math.random()\n    .toString(36)\n    .replace(/[^a-z]+/g, \"\")\n    .substr(0, 4)\n    .toUpperCase();\n\nexport const computeScore = ({ response, answer }) => {\n  if (response === answer) {\n    return -5;\n  }\n  return Math.abs(answer - response);\n};\n","import React, { useState } from \"react\";\nimport { generateCode } from \"../utils\";\n\nconst RoomCreateForm = ({ handleSubmit, handleCancel }) => {\n  const [name, setName] = useState(null);\n  const code = generateCode();\n  return (\n    <form onSubmit={e => handleSubmit(e, { name, code })}>\n      <div className=\"form-field\">\n        <label htmlFor=\"name-input\" className=\"form-label\">\n          NAME\n        </label>\n        <input\n          id=\"name-input\"\n          value={name}\n          onChange={e => setName(e.target.value)}\n          placeholder=\"Name\"\n        />\n      </div>\n      <div className=\"btn-group\">\n        <button onClick={handleCancel} type=\"button\" className=\"btn\">\n          go back\n        </button>\n        <button className=\"btn\">submit</button>\n      </div>\n    </form>\n  );\n};\n\nexport default RoomCreateForm;\n","import React, { useState } from \"react\";\n\nconst RoomJoinForm = ({ handleSubmit, handleCancel }) => {\n  const [code, setCode] = useState(null);\n  const [name, setName] = useState(null);\n  return (\n    <form onSubmit={e => handleSubmit(e, { name, code })}>\n      <div className=\"form-field\" j>\n        <label htmlFor=\"name-input\" className=\"form-label\">\n          NAME\n        </label>\n        <input\n          id=\"name-input\"\n          value={name}\n          onChange={e => setName(e.target.value)}\n          placeholder=\"Name\"\n        />\n      </div>\n      <div className=\"form-field\">\n        <label htmlFor=\"room-input\" className=\"form-label\">\n          ROOM\n        </label>\n        <input\n          id=\"room-input\"\n          value={code}\n          onChange={e => setCode(e.target.value)}\n          placeholder=\"Room Code\"\n        />\n      </div>\n      <div className=\"btn-group\">\n        <button className=\"btn\" type=\"button\" onClick={handleCancel}>\n          go back\n        </button>\n        <button className=\"btn\">submit</button>\n      </div>\n    </form>\n  );\n};\n\nexport default RoomJoinForm;\n","import React, { useState } from \"react\";\n\nconst RoundQuestionCard = ({\n  name,\n  description,\n  id,\n  userId,\n  imgSrc,\n  onSubmit\n}) => {\n  const [value, setValue] = useState(null);\n  return (\n    <div className=\"shadow rounded-lg border shadow-2xl bg-white w-8/12 sm:w-2/3 lg:w-1/2 xl:w-1/3 pb-4\">\n      <div className=\"showit relative\" style={{ height: \"calc(55vh)\" }}>\n        <img\n          className=\"blurme absolute top-0 object-cover rounded-t-lg w-full\"\n          src={imgSrc}\n          style={{ height: \"calc(55vh)\" }}\n        />\n        <p\n          className=\"p-4 absolute top-0 text-gray-800 text-lg showme rounded-t-lg w-full\"\n          style={{ height: \"100%\", overflowY: \"scroll\" }}\n        >\n          {description}\n        </p>\n      </div>\n      <div className=\"rounded-b-lg p-2\">\n        <h1 className=\"text-gray-700\">{name}</h1>\n        <form\n          className=\"flex flex-row w-full \"\n          onSubmit={e => {\n            e.preventDefault();\n            onSubmit({\n              variables: {\n                userId: userId,\n                questionId: id,\n                value\n              }\n            });\n          }}\n        >\n          <input\n            placeholder=\"Enter your guess...\"\n            value={value}\n            className=\"attached-right shadow-none\"\n            onChange={e => setValue(e.target.value)}\n          />\n          <button className=\"btn attached-left\">submit</button>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default RoundQuestionCard;\n","import * as L from \"partial.lenses\";\nimport React from \"react\";\n\nconst UserList = ({ data, responses }) => {\n  return (\n    <div className=\"fixed bottom-0 left-0 w-screen overflow-auto whitespace-no-wrap pb-2 px-4 text-center\">\n      {data.map(user => {\n        const answered = L.get(\n          [L.whereEq({ owner: { id: user.id } })],\n          responses\n        );\n        const cls = answered\n          ? \"badge px-6 py-2 mr-4 inline-block\"\n          : \"badge-gray px-6 py-2 mr-4 inline-block\";\n        console.log(cls);\n        console.log(\"answered?\", user, responses, answered);\n        return (\n          <span className={cls} key={user.id}>\n            {user.name}\n          </span>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default UserList;\n","import * as L from \"partial.lenses\";\nimport * as R from \"ramda\";\nimport { useContext } from \"react\";\nimport { StateContext } from \"../app-state\";\nimport { computeScore } from \"../utils\";\n\nconst RoomScore = ({ data }) => {\n  return `score: ${L.sum(\n    [\n      L.elems,\n      L.pick({ answer: \"answer\", response: [\"response\", \"value\"] }),\n      computeScore\n    ],\n    data\n  )}`;\n};\n\nexport default RoomScore;\n","import gql from \"graphql-tag\";\n\nexport const JOIN_ROOM_MUTATION = gql`\n  mutation CreateUser($name: String, $roomId: uuid) {\n    insert_user(objects: [{ name: $name, room_id: $roomId }]) {\n      affected_rows\n      returning {\n        id\n        name\n        room {\n          name\n          id\n        }\n      }\n    }\n  }\n`;\n\nexport const USERS_IN_ROOM_SUBSCRIPTION = gql`\n  subscription UsersInRoomSubscription($roomName: String) {\n    user(where: { room: { name: { _eq: $roomName } } }) {\n      id\n      name\n    }\n  }\n`;\n\nexport const USERS_IN_ROOM_QUERY = gql`\n  query UsersInRoomQuery($roomName: String) {\n    user(where: { room: { name: { _eq: $roomName } } }) {\n      id\n      name\n    }\n  }\n`;\n\nexport const ROOM_QUERY = gql`\n  query Room($name: String) {\n    room(where: { name: { _eq: $name } }, distinct_on: name) {\n      id\n      name\n      questions(order_by: { created_at: desc }) {\n        id\n        name\n        created_at\n        answer\n        responses {\n          value\n          owner {\n            name\n          }\n        }\n      }\n      users {\n        id\n        name\n      }\n    }\n  }\n`;\n\nexport const SUBSCRIBE_TO_ROOM = gql`\n  subscription SubscribeToRoom($roomId: uuid!) {\n    room_by_pk(id: $roomId) {\n      questions(order_by: { created_at: desc }) {\n        id\n        name\n        created_at\n        answer\n        responses {\n          value\n          owner {\n            name\n          }\n        }\n      }\n      users {\n        id\n        name\n      }\n    }\n  }\n`;\n\nexport const SUBSCRIBE_TO_ROOM_BY_NAME = gql`\n  subscription SubscribeToRoom($name: String) {\n    room(where: { name: { _eq: $name } }) {\n      id\n      state\n      name\n      round\n      questions(order_by: { created_at: asc }) {\n        id\n        name\n        state\n        created_at\n        answer\n        imageUrl\n        description\n        room {\n          id\n          name\n          round\n        }\n        responses {\n          value\n          owner {\n            id\n            name\n          }\n        }\n      }\n      users {\n        id\n        name\n      }\n    }\n  }\n`;\n\nexport const ROOM_BY_NAME_QUERY = gql`\n  query FindRoomByName($name: String) {\n    room(where: { name: { _eq: $name } }) {\n      id\n      name\n    }\n  }\n`;\n\n// export const CREATE_ROOM_MUTATION = gql`\n//   mutation CreateRoom($roomName: String, $userName: String) {\n//     insert_room(\n//       objects: [{ name: $roomName, users: { data: [{ name: $userName }] } }]\n//     ) {\n//       returning {\n//         id\n//       }\n//       affected_rows\n//     }\n//   }\n// `;\n\nexport const GET_RESPONSE_FOR_QUESTION_QUERY = gql`\n  query GetAnswer($questionId: uuid, $userId: uuid) {\n    response(\n      limit: 1\n      where: { question_id: { _eq: $questionId }, owner_id: { _eq: $userId } }\n    ) {\n      id\n      value\n    }\n  }\n`;\n\nexport const SUBMIT_RESPONSE_FOR_QUESTION = gql`\n  mutation SubmitAnswer($questionId: uuid, $userId: uuid, $value: Int) {\n    insert_response(\n      objects: [{ question_id: $questionId, owner_id: $userId, value: $value }]\n    ) {\n      affected_rows\n      returning {\n        id\n        value\n      }\n    }\n  }\n`;\n\nexport const RESPONSE_FOR_QUESTION_SUBSCRIPTION = gql`\n  subscription SubscribeToAnswer($questionId: uuid, $userId: uuid) {\n    response(\n      where: { question_id: { _eq: $questionId }, owner_id: { _eq: $userId } }\n      order_by: { created_at: desc }\n      limit: 1\n    ) {\n      id\n      value\n      question {\n        name\n        answer\n      }\n    }\n  }\n`;\n\nexport const CREATE_ROOM_MUTATION = gql`\n  mutation CreateRoomAndUser($userName: String, $roomName: String) {\n    insert_user(\n      objects: [{ name: $userName, room: { data: { name: $roomName } } }]\n    ) {\n      affected_rows\n      returning {\n        id\n        name\n        room {\n          name\n          id\n        }\n      }\n    }\n  }\n`;\nexport const SUBMIT_QUESTION_MUTATION = gql`\n  mutation SubmitQuestion(\n    $roomId: uuid!\n    $name: String\n    $description: String\n    $imageUrl: String\n    $answer: json\n  ) {\n    insert_question(\n      objects: [\n        {\n          room_id: $roomId\n          name: $name\n          description: $description\n          imageUrl: $imageUrl\n          answer: $answer\n        }\n      ]\n    ) {\n      affected_rows\n      returning {\n        id\n        name\n      }\n    }\n  }\n`;\n\nexport const NEXT_ROUND_MUTATION = gql`\n  mutation NextRound($roomId: uuid) {\n    update_room(_inc: { round: 1 }, where: { id: { _eq: $roomId } }) {\n      returning {\n        id\n      }\n    }\n  }\n`;\n","import { useMutation } from \"@apollo/react-hooks\";\nimport React from \"react\";\nimport * as docs from \"../documents\";\nimport MovieSearchInput from \"./MovieSearchInput\";\n\nconst searchUrl = title =>\n  `https://kha9mwfrdb.execute-api.us-east-1.amazonaws.com/dev/search/${title}`;\n\nconst MovieSearch = ({ roomId }) => {\n  const [submitQuestion] = useMutation(docs.SUBMIT_QUESTION_MUTATION);\n  const handleSelected = title => {\n    fetch(searchUrl(title))\n      .then(async resp => {\n        const json = await resp.json();\n        submitQuestion({\n          variables: {\n            roomId: roomId,\n            description: json.description,\n            imageUrl: json.poster,\n            name: json.title,\n            answer: json.reception\n          }\n        });\n      })\n      .catch(err => {\n        console.error(\"error!\", err);\n      });\n  };\n  return <MovieSearchInput onSelect={handleSelected} />;\n};\n\nexport default MovieSearch;\n","import React from \"react\";\nimport { computeScore } from \"../utils\";\nimport * as R from \"ramda\";\nimport * as L from \"partial.lenses\";\n\nconst Score = ({ value }) => {\n  const prefix = value > 0 ? \"+\" : \"\";\n  const textColor = value > 0 ? \"text-red-500\" : \"text-green-500\";\n  return (\n    <span className={`${textColor} font-semibold`}>\n      {prefix}\n      {value}\n    </span>\n  );\n};\n\nconst RoundResult = ({ name, response, answer, responses }) => {\n  const results = L.modify(\n    [L.elems],\n    x =>\n      R.mergeRight(x, {\n        score: computeScore({ response: x.value, answer })\n      }),\n    R.append({ user: \"you\", value: response }, responses)\n  );\n  return (\n    <div>\n      {name}: {answer}\n      <ul>\n        {R.sortBy(R.prop(\"value\"), results).map((r, i) => {\n          return (\n            <li key={i}>\n              {r.user}: {r.value} <Score value={r.score} />\n            </li>\n          );\n        })}\n      </ul>\n    </div>\n  );\n};\n\nexport default RoundResult;\n","import React from \"react\";\nimport RoundScore from \"./RoundScore\";\n\nconst RoundSummary = ({\n  name,\n  response,\n  responses,\n  answer,\n  onNextRound,\n  onEndGame\n}) => {\n  return (\n    <>\n      <RoundScore\n        name={name}\n        response={response}\n        answer={answer}\n        responses={responses}\n      />\n      <div className=\"btn-group\">\n        <button className=\"btn\" onClick={onNextRound}>\n          next round\n        </button>\n        <button className=\"btn\" onClick={onEndGame}>\n          end game\n        </button>\n      </div>\n    </>\n  );\n};\n\nexport default RoundSummary;\n","import { useMutation } from \"@apollo/react-hooks\";\nimport * as L from \"partial.lenses\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { StateContext } from \"../app-state\";\nimport * as docs from \"../documents\";\nimport MovieSearch from \"./MovieSearch\";\nimport RoundQuestionCard from \"./RoundQuestionCard\";\nimport RoundSummary from \"./RoundSummary\";\n\nconst Round = ({ data, nUsers, roomId }) => {\n  const { user } = useContext(StateContext);\n  const [roundOver, setRoundOver] = useState(false);\n  const onEndGame = () => console.log(\"done.\");\n  const [nextRound] = useMutation(docs.NEXT_ROUND_MUTATION);\n  const [submitResponse] = useMutation(docs.SUBMIT_RESPONSE_FOR_QUESTION);\n  useEffect(() => {\n    if (data && nUsers === data.responses.length) {\n      setRoundOver(true);\n    } else {\n      setRoundOver(false);\n    }\n  }, [data, nUsers]);\n\n  const userResponse = L.get(\n    [\"responses\", L.whereEq({ owner: { id: user.id } })],\n    data\n  );\n  const responses = L.collect(\n    [\n      \"responses\",\n      L.filter(x => x.owner.id !== user.id),\n      L.elems,\n      L.pick({ user: [\"owner\", \"name\"], value: \"value\" })\n    ],\n    data\n  );\n\n  const onNextRound = () => {\n    nextRound({ variables: { roomId: data.room.id } });\n  };\n\n  if (data) {\n    if (data.answer && roundOver) {\n      return (\n        <RoundSummary\n          name={data.name}\n          response={userResponse.value}\n          answer={data.answer.score.rottenTomatoes}\n          responses={responses}\n          onNextRound={onNextRound}\n          onEndGame={onEndGame}\n        />\n      );\n    } else if (!userResponse) {\n      return (\n        <RoundQuestionCard\n          name={data.name}\n          description={data.description}\n          id={data.id}\n          userId={user.id}\n          imgSrc={data.imageUrl}\n          onSubmit={submitResponse}\n        />\n      );\n    } else {\n      return <span>Current Answer: {userResponse.value}</span>;\n    }\n  }\n  return <MovieSearch roomId={roomId} />;\n};\n\nexport default Round;\n","import * as L from \"partial.lenses\";\nimport * as R from \"ramda\";\nimport React, { useContext } from \"react\";\nimport RoomScore from \"./RoomScore\";\nimport Round from \"./Round\";\nimport UserList from \"./UserList\";\nimport { StateContext } from \"../app-state\";\n\nconst Room = ({ data }) => {\n  const { user } = useContext(StateContext);\n  const questions = L.collect([\n    L.elems,\n    L.pick({\n      answer: [\"answer\", \"score\", \"rottenTomatoes\"],\n      response: {\n        value: [\"responses\", L.whereEq({ owner: { id: user.id } }), \"value\"]\n      }\n    })\n  ])(data.questions);\n  return (\n    <div className=\"flex flex-col justify-center items-center w-full pb-0\">\n      <Round\n        data={data.questions[data.round]}\n        roomId={data.id}\n        nUsers={data.users.length}\n      />\n      <RoomScore data={questions} />\n      <UserList\n        data={data.users}\n        responses={R.propOr([], \"responses\", data.questions[data.round])}\n      />\n    </div>\n  );\n};\n\nexport default Room;\n","import React from \"react\";\nimport { Route } from \"react-router-dom\";\nimport { StateContext } from \"./app-state\";\nimport MovieSearchInput from \"./components/MovieSearchInput\";\nimport RoomCreateForm from \"./components/RoomCreateForm\";\nimport RoomJoinForm from \"./components/RoomJoinForm\";\nimport RoundQuestionCard from \"./components/RoundQuestionCard\";\nimport UserList from \"./components/UserList\";\nimport Room from \"./components/Room\";\n\nconst ComponentsWithMocks = () => {\n  const users = [\n    { name: \"Carol\", id: \"carol-id\" },\n    { name: \"Bob\", id: \"bob-id\" },\n    { name: \"Bob\", id: \"bob-id\" },\n    { name: \"Bob\", id: \"bob-id\" },\n    { name: \"Bob\", id: \"bob-id\" },\n    { name: \"Bob\", id: \"bob-id\" }\n  ];\n  return (\n    <StateContext.Provider value={{ user: { id: \"user-id\", name: \"Frank\" } }}>\n      <Route path=\"/components/join\" component={RoomJoinForm} />\n      <Route path=\"/components/create\" component={RoomCreateForm} />\n      <Route path=\"/components/users\">\n        <UserList data={users} />\n      </Route>\n      <Route path=\"/components/question\">\n        <RoundQuestionCard data={{ id: \"some-id\" }} />\n      </Route>\n      <Route path=\"/components/search\" component={MovieSearchInput} />\n      <Route path=\"/components/room\">\n        <Room\n          data={{\n            name: \"ABCD\",\n            questions: [\n              {\n                // name: \"The Terminal\",\n                // imageUrl:\n                //   \"https://upload.wikimedia.org/wikipedia/en/8/86/Movie_poster_the_terminal.jpg\",\n                name: \"The Matrix\",\n                imageUrl:\n                  \"https://upload.wikimedia.org/wikipedia/en/c/c1/The_Matrix_Poster.jpg\",\n                description:\n                  'The Matrix is a 1999 science fiction action film[3][4] written and directed by the Wachowskis.[a] It stars Keanu Reeves, Laurence Fishburne, Carrie-Anne Moss, Hugo Weaving, and Joe Pantoliano and is the first installment in the Matrix franchise. It depicts a dystopian future in which humanity is unknowingly trapped inside a simulated reality, the Matrix, created by intelligent machines to distract humans while using their bodies as an energy source.[5] When computer programmer Thomas Anderson, under the hacker alias \"Neo\", uncovers the truth, he \"is drawn into a rebellion against the machines\"[5] along with other people who have been freed from the Matrix.',\n                responses: [{ owner: { id: \"carol-id\" } }]\n              }\n            ],\n            round: 0,\n            users\n          }}\n        />\n      </Route>\n    </StateContext.Provider>\n  );\n};\n\nexport default ComponentsWithMocks;\n","import { useHistory } from \"react-router-dom\";\nimport React, { useState, useEffect } from \"react\";\n\nconst HomePage = () => {\n  const [state, setState] = useState();\n  const history = useHistory();\n  useEffect(() => {\n    if (state === \"join\") {\n      history.push(\"/join\");\n    } else if (state === \"create\") {\n      history.push(\"/create\");\n    }\n  }, [state]);\n  return (\n    <div className=\"px-10\">\n      <h1>Do you want to play a game?</h1>\n      <div className=\"btn-group\">\n        <button className=\"btn\" onClick={() => setState(\"create\")}>\n          create\n        </button>\n        <button className=\"btn\" onClick={() => setState(\"join\")}>\n          join\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default HomePage;\n","import { useMutation } from \"@apollo/react-hooks\";\nimport * as R from \"ramda\";\nimport { default as React, useContext, useEffect, useState } from \"react\";\nimport RoomCreateForm from \"../components/RoomCreateForm\";\nimport { StateContext } from \"../app-state\";\nimport * as docs from \"../documents\";\nimport { useHistory } from \"react-router-dom\";\n\nconst RoomCreatePage = () => {\n  const history = useHistory();\n  const { setUser } = useContext(StateContext);\n  const [state, setState] = useState({\n    userName: undefined,\n    roomCode: undefined\n  });\n  const [createRoom, roomCreated] = useMutation(docs.CREATE_ROOM_MUTATION);\n  useEffect(() => {\n    if (state.userName && state.roomCode) {\n      createRoom({\n        variables: { userName: state.userName, roomName: state.roomCode }\n      });\n    }\n  }, [state.roomCode, state.userName, createRoom]);\n\n  useEffect(() => {\n    if (roomCreated.data) {\n      setUser(roomCreated.data.insert_user.returning[0]);\n    }\n  }, [roomCreated, setUser]);\n\n  const handleSubmit = (e, { name, code }) => {\n    e.preventDefault();\n    console.log(\"here/\");\n    setState(R.mergeLeft({ userName: name, roomCode: code }));\n  };\n\n  const handleCancel = () => history.push(\"/\");\n\n  return (\n    <RoomCreateForm handleSubmit={handleSubmit} handleCancel={handleCancel} />\n  );\n};\n\nexport default RoomCreatePage;\n","import { useMutation, useLazyQuery } from \"@apollo/react-hooks\";\nimport * as R from \"ramda\";\nimport { default as React, useContext, useEffect, useState } from \"react\";\nimport { StateContext } from \"../app-state\";\nimport * as docs from \"../documents\";\nimport RoomJoinForm from \"../components/RoomJoinForm\";\nimport { useHistory } from \"react-router-dom\";\n\nconst RoomJoinPage = () => {\n  const history = useHistory();\n  const { setUser } = useContext(StateContext);\n  const [state, setState] = useState({\n    userName: undefined,\n    roomCode: undefined,\n    roomId: undefined\n  });\n  const [queryRoom, roomQuery] = useLazyQuery(docs.ROOM_BY_NAME_QUERY);\n  const [joinRoom, roomJoined] = useMutation(docs.JOIN_ROOM_MUTATION);\n\n  useEffect(() => {\n    if (state.roomCode) {\n      queryRoom({ variables: { name: state.roomCode } });\n    }\n  }, [state.roomCode]);\n\n  useEffect(() => {\n    if (!roomQuery.loading) {\n      if (roomQuery.data && roomQuery.data.room.length) {\n        setState(R.mergeLeft({ roomId: roomQuery.data.room[0].id }));\n      }\n    }\n  }, [roomQuery]);\n\n  useEffect(() => {\n    if (state.roomId && state.userName) {\n      joinRoom({ variables: { name: state.userName, roomId: state.roomId } });\n    }\n  }, [state.roomId, state.userName, joinRoom]);\n\n  useEffect(() => {\n    if (roomJoined.data) {\n      setUser(roomJoined.data.insert_user.returning[0]);\n    }\n  }, [roomJoined.data, setUser]);\n\n  const handleSubmit = (e, { name, code }) => {\n    e.preventDefault();\n    setState(R.mergeLeft({ userName: name, roomCode: code }));\n  };\n\n  const handleCancel = () => history.push(\"/\");\n\n  return (\n    <RoomJoinForm handleSubmit={handleSubmit} handleCancel={handleCancel} />\n  );\n};\n\nexport default RoomJoinPage;\n","import React from \"react\";\nimport * as docs from \"../documents\";\nimport Room from \"../components/Room\";\nimport { useSubscription } from \"@apollo/react-hooks\";\n\nconst RoomPage = ({\n  match: {\n    params: { name }\n  }\n}) => {\n  const resp = useSubscription(docs.SUBSCRIBE_TO_ROOM_BY_NAME, {\n    variables: { name }\n  });\n  if (resp.loading) {\n    return \"Loading...\";\n  }\n  return <Room data={resp.data.room[0]} />;\n};\n\nexport default RoomPage;\n","import React from \"react\";\nimport { Redirect, Route } from \"react-router-dom\";\n\nconst ProtectedRoute = ({ component: Comp, loggedIn, path, ...rest }) => {\n  return (\n    <Route\n      path={path}\n      {...rest}\n      render={props => {\n        return loggedIn ? <Comp {...props} /> : <Redirect to=\"/\" />;\n      }}\n    />\n  );\n};\n\nexport default ProtectedRoute;\n","import React, { useContext } from \"react\";\nimport { ApolloProvider } from \"react-apollo\";\nimport ReactDOM from \"react-dom\";\nimport { HashRouter as Router, Route, Switch } from \"react-router-dom\";\nimport { StateContext, StateProvider } from \"./app-state\";\nimport client from \"./client\";\nimport ComponentsWithMocks from \"./components-with-mocks\";\nimport HomePage from \"./pages/HomePage\";\nimport RoomCreatePage from \"./pages/RoomCreatePage\";\nimport RoomJoinPage from \"./pages/RoomJoinPage\";\nimport RoomPage from \"./pages/RoomPage\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport \"./styles/tailwind.css\";\n\nimport \"./styles/custom.css\";\n\nconst Routes = () => {\n  const { user } = useContext(StateContext);\n  return (\n    <div className=\"app\">\n      <Route path=\"/\" exact>\n        <HomePage />\n      </Route>\n      <ComponentsWithMocks />\n      <Route path=\"/join\" component={RoomJoinPage} />\n      <Route path=\"/create\" component={RoomCreatePage} />\n      <ProtectedRoute\n        path=\"/room/:name\"\n        component={RoomPage}\n        loggedIn={user ? true : false}\n      />\n    </div>\n  );\n};\n\nfunction App() {\n  return (\n    <ApolloProvider client={client}>\n      <Router basename=\"/\">\n        <Switch>\n          <StateProvider>\n            <Routes />\n          </StateProvider>\n        </Switch>\n      </Router>\n    </ApolloProvider>\n  );\n}\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(<App />, rootElement);\n"],"sourceRoot":""}