{"version":3,"sources":["app-state.js","client.js","components/MovieSearchInput.js","utils.js","components/RoomCreateForm.js","components/RoomJoinForm.js","components/RoundQuestionCard.js","components/UserList.js","components/RoomScore.js","documents.js","components/RoundSummary.js","components/Room.js","components/Round.js","components-with-mocks.js","pages/HomePage.js","pages/RoomCreatePage.js","pages/RoomJoinPage.js","components/MovieSearch.js","pages/RoomPage.js","pages/UserPage.js","ProtectedRoute.js","index.js"],"names":["StateContext","React","createContext","StateProvider","_ref","children","history","useHistory","_useState","useState","_useState2","Object","slicedToArray","user","setUser","useEffect","room","push","concat","name","react_default","a","createElement","Provider","value","httpLink","HttpLink","uri","wsLink","WebSocketLink","options","reconnect","link","split","query","definition","getMainDefinition","kind","operation","client","ApolloClient","cache","InMemoryCache","MovieSearchInput","_ref$onSelect","onSelect","console","log","setValue","results","R","x","title","length","L","includes","movies","placeholder","onChange","e","target","className","slice","map","result","ix","onClick","replace","key","year","generateCode","Math","random","toString","substr","toUpperCase","computeScore","response","answer","abs","collectResults","responses","id","score","RoomCreateForm","handleSubmit","handleCancel","setName","code","onSubmit","htmlFor","type","Context","RoomJoinForm","_ref$roomCode","roomCode","_ref$userName","userName","setCode","_useState3","_useState4","NameInput","_useContext","useContext","j","CodeInput","_useContext2","RoundQuestionCard","description","userId","imgSrc","style","height","src","alt","overflowY","preventDefault","variables","questionId","UserList","data","cls","owner","RoomScore","JOIN_ROOM_MUTATION","gql","_templateObject","EXISTING_USER_JOIN_ROOM_MUTATION","_templateObject2","SUBSCRIBE_TO_ROOM_BY_NAME","_templateObject3","_templateObject4","_templateObject5","_templateObject6","_templateObject7","_templateObject8","_templateObject9","_templateObject10","ROOM_BY_NAME_QUERY","_templateObject11","SUBMIT_RESPONSE_FOR_QUESTION","_templateObject12","_templateObject13","CREATE_ROOM_MUTATION","_templateObject14","_templateObject15","SUBMIT_QUESTION_MUTATION","_templateObject16","NEXT_ROUND_MUTATION","_templateObject17","USER_LOGIN","_templateObject18","INSERT_ROOM_EXISTING_USER","_templateObject19","_templateObject20","done","CorrectScore","animated","props","objectWithoutProperties","Score","_ref2","prefix","textColor","RoundSummary","_ref6","correctScoreRef","useRef","trailsRef","setDone","useChain","RoundSummary_Context","BtnGroup","_ref5","onNextRound","onEndGame","Answer","_ref3","useSpring","config","mass","friction","tension","from","to","ref","interpolate","toFixed","Ranking","_ref4","sortedResults","trail","useTrail","molasses","transform","opacity","onRest","web","li","RoundSummary_Score","Room","Round","userResponse","roundOver","_useMutation","useMutation","docs","submitResponse","_useMutation3","nextRound","collectRoundResults","components_RoundSummary","roomId","components_RoundQuestionCard","imageUrl","ComponentsWithMocks","users","react_router","path","component","components_UserList","components_Room","questions","round","HomePage","state","setState","RoomCreatePage","undefined","_useMutation2","createRoom","roomCreated","_useMutation4","createRoomExistingUser","roomCreatedExistingUser","roomName","insert_room","returning","insert_user","components_RoomCreateForm","RoomJoinPage","_useLazyQuery","useLazyQuery","_useLazyQuery2","queryRoom","roomQuery","loading","newUserData","createUserAndJoinRoom","resp","useNewUserLogic","existingUserData","userJoinRoom","useExistingUserLogic","_objectSpread","userData","components_RoomJoinForm","reducer","action","MovieSearch_objectSpread","selection","payload","message","error","MovieSearch","onSelection","_useReducer","useReducer","_useReducer2","current","dispatch","fetch","process","headers","Content-Type","then","asyncToGenerator","regenerator_default","mark","_callee","json","wrap","_context","prev","next","sent","reception","rottenTomatoes","stop","_x","apply","this","arguments","catch","err","components_MovieSearchInput","RoomPage","match","params","setRoundOver","useSubscription","submitQuestion","es","nUsers","Fragment","components_MovieSearch","poster","_useQuery","useQuery","user_by_pk","ProtectedRoute","Comp","loggedIn","rest","assign","render","Routes","exact","pages_HomePage","components_with_mocks","UserPage","src_ProtectedRoute","rootElement","document","getElementById","ReactDOM","react_common_esm","react_router_dom","basename","app_state_StateProvider","src_Routes"],"mappings":"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","file":"static/js/main.9984eab3.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\nexport const StateContext = React.createContext();\n\nexport const StateProvider = ({ children }) => {\n  const history = useHistory();\n  const [user, setUser] = useState();\n  useEffect(() => {\n    if (user) {\n      if (user.room) {\n        history.push(`/room/${user.room.name}`);\n      } else {\n        history.push(\"/\");\n      }\n    }\n  }, [user, history]);\n  return (\n    <StateContext.Provider value={{ user, setUser }}>\n      {children}\n    </StateContext.Provider>\n  );\n};\n","import { split } from \"apollo-link\";\nimport { HttpLink } from \"apollo-link-http\";\nimport { WebSocketLink } from \"apollo-link-ws\";\nimport { getMainDefinition } from \"apollo-utilities\";\nimport { ApolloClient } from \"apollo-client\";\nimport { InMemoryCache } from \"apollo-cache-inmemory\";\n\n// Create an http link:\nconst httpLink = new HttpLink({\n  uri: \"https://graphql-number-guessing-game.herokuapp.com/v1/graphql\"\n});\n\n// Create a WebSocket link:\nconst wsLink = new WebSocketLink({\n  uri: `wss://graphql-number-guessing-game.herokuapp.com/v1/graphql`,\n  options: {\n    reconnect: true\n  }\n});\n\n// using the ability to split links, you can send data to each link\n// depending on what kind of operation is being sent\nconst link = split(\n  // split based on operation type\n  ({ query }) => {\n    const definition = getMainDefinition(query);\n    return definition.kind === \"OperationDefinition\" && definition.operation === \"subscription\";\n  },\n  wsLink,\n  httpLink\n);\n\nconst client = new ApolloClient({\n  link,\n  cache: new InMemoryCache()\n  // for SSR, use:\n  // cache: new Cache().restore(window.__APOLLO_STATE__ || {})\n});\n\nexport default client;\n","import * as L from \"partial.lenses\";\nimport * as R from \"ramda\";\nimport React, { useState } from \"react\";\nimport movies from \"../movies\";\n\nconst MovieSearchInput = ({ onSelect = console.log }) => {\n  const [value, setValue] = useState();\n  const results = R.sortWith(\n    [\n      R.ascend(x => (x.title.length === value.length ? 0 : 1)),\n      R.descend(R.prop(\"year\"))\n    ],\n    L.collect(\n      [\n        L.satisfying(\n          R.where({\n            title: x => x && value && R.toLower(x).includes(R.toLower(value))\n          })\n        )\n      ],\n      movies\n    )\n  );\n  return (\n    <div>\n      <input\n        placeholder=\"Search movie titles...\"\n        value={value}\n        onChange={e => setValue(e.target.value)}\n      />\n      <div\n        className={`absolute bg-gray-100 text-gray-600 rounded-lg shadow-xl h-64 overflow-y-scroll w-64 ${\n          results.length === 0 ? \"hidden\" : \"block\"\n        }`}\n      >\n        <ul>\n          {results.slice(0, 15).map((result, ix) => {\n            return (\n              <li\n                onClick={() => onSelect(result.link.replace(\"/wiki/\", \"\"))}\n                // onClick={() => onSelect(result)}\n                key={ix}\n                className=\"hover:bg-indigo-600 w-full hover:text-white px-2\"\n              >\n                {result.title} ({result.year})\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nexport default MovieSearchInput;\n","import * as R from \"ramda\";\nimport * as L from \"partial.lenses\";\n\nexport const generateCode = () =>\n  Math.random()\n    .toString(36)\n    .replace(/[^a-z]+/g, \"\")\n    .substr(0, 4)\n    .toUpperCase();\n\nexport const computeScore = ({ response, answer }) => {\n  if (response === answer) {\n    return -5;\n  }\n  return Math.abs(answer - response);\n};\n\nexport const collectResults = R.curry((user, answer, responses) =>\n  L.collect(\n    [\n      L.elems,\n      L.pick({\n        user: [\"owner\", x => (x.id === user.id ? \"you\" : user.name)],\n        value: \"value\",\n        score: [\n          \"value\",\n          x => {\n            return computeScore({ response: x, answer });\n          }\n        ]\n      })\n    ],\n    responses\n  )\n);\n","import React, { useState } from \"react\";\nimport { generateCode } from \"../utils\";\n\nconst RoomCreateForm = ({ handleSubmit, handleCancel }) => {\n  const [name, setName] = useState(null);\n  const code = generateCode();\n  return (\n    <form onSubmit={e => handleSubmit(e, { name, code })}>\n      <div className=\"form-field\">\n        <label htmlFor=\"name-input\" className=\"form-label\">\n          NAME\n        </label>\n        <input\n          id=\"name-input\"\n          value={name}\n          onChange={e => setName(e.target.value)}\n          placeholder=\"Name\"\n        />\n      </div>\n      <div className=\"btn-group\">\n        <button onClick={handleCancel} type=\"button\" className=\"btn\">\n          go back\n        </button>\n        <button className=\"btn\">submit</button>\n      </div>\n    </form>\n  );\n};\n\nexport default RoomCreateForm;\n","import React, { useState, useContext } from \"react\";\nimport * as R from \"ramda\";\n\nconst Context = React.createContext();\n\nconst RoomJoinNameInput = () => {\n  const { name, setName } = useContext(Context);\n  return (\n    <div className=\"form-field\" j>\n      <label htmlFor=\"name-input\" className=\"form-label\">\n        NAME\n      </label>\n      <input\n        id=\"name-input\"\n        value={name}\n        onChange={e => setName(e.target.value)}\n        placeholder=\"Name\"\n      />\n    </div>\n  );\n};\n\nconst RoomJoinCodeInput = () => {\n  const { code, setCode } = useContext(Context);\n  return (\n    <div className=\"form-field\">\n      <label htmlFor=\"room-input\" className=\"form-label\">\n        ROOM\n      </label>\n      <input\n        id=\"room-input\"\n        value={code}\n        onChange={e => setCode(R.toUpper(e.target.value))}\n        placeholder=\"Room Code\"\n      />\n    </div>\n  );\n};\n\nconst RoomJoinForm = ({\n  children,\n  handleSubmit,\n  handleCancel,\n  roomCode = null,\n  userName = null\n}) => {\n  const [code, setCode] = useState(roomCode);\n  const [name, setName] = useState(userName);\n  return (\n    <Context.Provider value={{ code, setCode, name, setName }}>\n      <form onSubmit={e => handleSubmit(e, { name, code })}>\n        {children}\n        <div className=\"btn-group\">\n          <button className=\"btn\" type=\"button\" onClick={handleCancel}>\n            go back\n          </button>\n          <button className=\"btn\">submit</button>\n        </div>\n      </form>\n    </Context.Provider>\n  );\n};\n\nRoomJoinForm.NameInput = RoomJoinNameInput;\nRoomJoinForm.CodeInput = RoomJoinCodeInput;\n\nexport default RoomJoinForm;\n","import React, { useState } from \"react\";\n\nconst RoundQuestionCard = ({\n  name,\n  description,\n  id,\n  userId,\n  imgSrc,\n  onSubmit\n}) => {\n  const [value, setValue] = useState(null);\n  return (\n    <div className=\"shadow rounded-lg border shadow-2xl bg-white w-8/12 sm:w-2/3 lg:w-1/2 xl:w-1/3 pb-4\">\n      <div className=\"showit relative\" style={{ height: \"calc(55vh)\" }}>\n        <img\n          className=\"blurme absolute top-0 object-cover rounded-t-lg w-full\"\n          src={imgSrc}\n          style={{ height: \"calc(55vh)\" }}\n          alt=\"movie poster\"\n        />\n        <p\n          className=\"p-4 absolute top-0 text-gray-800 text-lg showme rounded-t-lg w-full\"\n          style={{ height: \"100%\", overflowY: \"scroll\" }}\n        >\n          {description}\n        </p>\n      </div>\n      <div className=\"rounded-b-lg p-2\">\n        <h1 className=\"text-gray-700\">{name}</h1>\n        <form\n          className=\"flex flex-row w-full \"\n          onSubmit={e => {\n            e.preventDefault();\n            onSubmit({\n              variables: {\n                userId: userId,\n                questionId: id,\n                value\n              }\n            });\n          }}\n        >\n          <input\n            placeholder=\"Enter your guess...\"\n            value={value}\n            className=\"attached-right shadow-none\"\n            onChange={e => setValue(e.target.value)}\n          />\n          <button className=\"btn attached-left\">submit</button>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default RoundQuestionCard;\n","import * as L from \"partial.lenses\";\nimport React from \"react\";\n\nconst UserList = ({ data, responses }) => {\n  return (\n    <div className=\"fixed bottom-0 left-0 w-screen overflow-auto whitespace-no-wrap pb-2 px-4 text-center\">\n      {data.map(user => {\n        const answered = L.get(\n          [L.whereEq({ owner: { id: user.id } })],\n          responses\n        );\n        const cls = answered\n          ? \"badge px-6 py-2 mr-4 inline-block\"\n          : \"badge-gray px-6 py-2 mr-4 inline-block\";\n        return (\n          <span className={cls} key={user.id}>\n            {user.name}\n          </span>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default UserList;\n","import * as L from \"partial.lenses\";\nimport { computeScore } from \"../utils\";\n\nconst RoomScore = ({ data }) => {\n  return `score: ${L.sum(\n    [\n      L.elems,\n      L.pick({ answer: \"answer\", response: [\"response\", \"value\"] }),\n      computeScore\n    ],\n    data\n  )}`;\n};\n\nexport default RoomScore;\n","import gql from \"graphql-tag\";\n\nexport const JOIN_ROOM_MUTATION = gql`\n  mutation CreateUser($name: String, $roomId: uuid) {\n    insert_user(objects: [{ name: $name, room_id: $roomId }]) {\n      affected_rows\n      returning {\n        id\n        name\n        room {\n          name\n          id\n        }\n      }\n    }\n  }\n`;\n\nexport const EXISTING_USER_JOIN_ROOM_MUTATION = gql`\n  mutation UpdateUserRoomId($id: uuid!, $roomId: uuid) {\n    update_user(where: { id: { _eq: $id } }, _set: { room_id: $roomId }) {\n      affected_rows\n      returning {\n        id\n        name\n        room {\n          name\n          id\n        }\n      }\n    }\n  }\n`;\n\nexport const ROOM_ROUND_SUBSCRIPTION = gql`\n  subscription RoomRoundSubscription($roomName: String) {\n    room(where: { name: { _eq: $roomName } }) {\n      id\n      name\n      round\n    }\n  }\n`;\n\nexport const USERS_IN_ROOM_SUBSCRIPTION = gql`\n  subscription UsersInRoomSubscription($roomName: String) {\n    user(where: { room: { name: { _eq: $roomName } } }) {\n      id\n      name\n    }\n  }\n`;\nexport const RESPONSES_FOR_QUESTION_SUBSCRIPTION = gql`\n  subscription UsersInRoomSubscription($questionId: uuid) {\n    response(where: { question: { id: { _eq: $questionId } } }) {\n      id\n      value\n      owner {\n        id\n      }\n    }\n  }\n`;\n\nexport const QUESTIONS_IN_ROOM_SUBSCRIPTION = gql`\n  subscription UsersInRoomSubscription($roomName: String) {\n    question(where: { room: { name: { _eq: $roomName } } }) {\n      id\n      name\n    }\n  }\n`;\n\nexport const USERS_IN_ROOM_QUERY = gql`\n  query UsersInRoomQuery($roomName: String) {\n    user(where: { room: { name: { _eq: $roomName } } }) {\n      id\n      name\n    }\n  }\n`;\n\nexport const ROOM_QUERY = gql`\n  query Room($name: String) {\n    room(where: { name: { _eq: $name } }, distinct_on: name) {\n      id\n      name\n      questions(order_by: { created_at: desc }) {\n        id\n        name\n        created_at\n        answer\n        responses {\n          value\n          owner {\n            name\n          }\n        }\n      }\n      users {\n        id\n        name\n      }\n    }\n  }\n`;\n\nexport const SUBSCRIBE_TO_ROOM = gql`\n  subscription SubscribeToRoom($roomId: uuid!) {\n    room_by_pk(id: $roomId) {\n      questions(order_by: { created_at: desc }) {\n        id\n        name\n        created_at\n        answer\n        responses {\n          value\n          owner {\n            name\n          }\n        }\n      }\n      users {\n        id\n        name\n      }\n    }\n  }\n`;\n\nexport const SUBSCRIBE_TO_ROOM_BY_NAME = gql`\n  subscription SubscribeToRoom($name: String) {\n    room(where: { name: { _eq: $name } }) {\n      id\n      state\n      name\n      round\n      questions(order_by: { created_at: asc }) {\n        id\n        name\n        state\n        created_at\n        answer\n        imageUrl\n        description\n        room {\n          id\n          name\n          round\n        }\n        responses {\n          value\n          owner {\n            id\n            name\n          }\n          question {\n            id\n          }\n        }\n      }\n      users {\n        id\n        name\n      }\n    }\n  }\n`;\n\nexport const ROOM_BY_NAME_QUERY = gql`\n  query FindRoomByName($name: String) {\n    room(where: { name: { _eq: $name } }) {\n      id\n      name\n    }\n  }\n`;\n\n// export const CREATE_ROOM_MUTATION = gql`\n//   mutation CreateRoom($roomName: String, $userName: String) {\n//     insert_room(\n//       objects: [{ name: $roomName, users: { data: [{ name: $userName }] } }]\n//     ) {\n//       returning {\n//         id\n//       }\n//       affected_rows\n//     }\n//   }\n// `;\n\nexport const GET_RESPONSE_FOR_QUESTION_QUERY = gql`\n  query GetAnswer($questionId: uuid, $userId: uuid) {\n    response(\n      limit: 1\n      where: { question_id: { _eq: $questionId }, owner_id: { _eq: $userId } }\n    ) {\n      id\n      value\n    }\n  }\n`;\n\nexport const SUBMIT_RESPONSE_FOR_QUESTION = gql`\n  mutation SubmitAnswer($questionId: uuid, $userId: uuid, $value: Int) {\n    insert_response(\n      objects: [{ question_id: $questionId, owner_id: $userId, value: $value }]\n    ) {\n      affected_rows\n      returning {\n        id\n        value\n      }\n    }\n  }\n`;\n\nexport const RESPONSE_FOR_QUESTION_SUBSCRIPTION = gql`\n  subscription SubscribeToAnswer($questionId: uuid, $userId: uuid) {\n    response(\n      where: { question_id: { _eq: $questionId }, owner_id: { _eq: $userId } }\n      order_by: { created_at: desc }\n      limit: 1\n    ) {\n      id\n      value\n      question {\n        name\n        answer\n      }\n    }\n  }\n`;\n\nexport const CREATE_ROOM_MUTATION = gql`\n  mutation CreateRoomAndUser($userName: String, $roomName: String) {\n    insert_user(\n      objects: [{ name: $userName, room: { data: { name: $roomName } } }]\n    ) {\n      affected_rows\n      returning {\n        id\n        name\n        room {\n          name\n          id\n        }\n      }\n    }\n  }\n`;\n\nexport const SUBMIT_QUESTION_MUTATION = gql`\n  mutation SubmitQuestion(\n    $roomId: uuid!\n    $name: String\n    $description: String\n    $imageUrl: String\n    $answer: json\n  ) {\n    insert_question(\n      objects: [\n        {\n          room_id: $roomId\n          name: $name\n          description: $description\n          imageUrl: $imageUrl\n          answer: $answer\n        }\n      ]\n    ) {\n      affected_rows\n      returning {\n        id\n        name\n      }\n    }\n  }\n`;\n\nexport const NEXT_ROUND_MUTATION = gql`\n  mutation NextRound($roomId: uuid) {\n    update_room(_inc: { round: 1 }, where: { id: { _eq: $roomId } }) {\n      returning {\n        id\n      }\n    }\n  }\n`;\n\nexport const USER_LOGIN = gql`\n  query FindUser($id: uuid!) {\n    user_by_pk(id: $id) {\n      name\n      id\n      room {\n        name\n        id\n      }\n    }\n  }\n`;\n\nexport const INSERT_ROOM_EXISTING_USER = gql`\n  mutation InsertRoomExistingUser(\n    $userName: String\n    $userId: uuid!\n    $roomName: String\n  ) {\n    insert_room(\n      objects: [\n        {\n          name: $roomName\n          users: {\n            data: [{ id: $userId, name: $userName }]\n            on_conflict: { constraint: user_pkey, update_columns: [room_id] }\n          }\n        }\n      ]\n    ) {\n      returning {\n        name\n        id\n        users {\n          name\n          id\n        }\n      }\n    }\n  }\n`;\n\nexport const INSERT_ROOM_NEW_USER = gql`\n  mutation InsertRoomNewUser($userName: String, $roomName: String) {\n    insert_room(\n      objects: [\n        {\n          name: $roomName\n          users: {\n            data: [{ name: $userName }]\n            on_conflict: { constraint: user_pkey, update_columns: [room_id] }\n          }\n        }\n      ]\n    ) {\n      returning {\n        name\n        id\n        users {\n          name\n          id\n        }\n      }\n    }\n  }\n`;\n","import * as R from \"ramda\";\nimport React, { useContext, useRef, useState } from \"react\";\nimport { animated, config, useChain, useSpring, useTrail } from \"react-spring\";\n\nconst Context = React.createContext({ done: true });\n\nconst CorrectScore = animated(({ name, value, ...props }) => {\n  return (\n    <div {...props}>\n      {name}: {value}\n    </div>\n  );\n});\n\nconst Score = ({ value }) => {\n  const prefix = value > 0 ? \"+\" : \"\";\n  const textColor = value > 0 ? \"text-red-500\" : \"text-green-500\";\n  return (\n    <span className={`${textColor} font-semibold`}>\n      {prefix}\n      {value}\n    </span>\n  );\n};\n\nconst RoundAnswer = ({ name, answer }) => {\n  const { correctScoreRef } = useContext(Context);\n  const props = useSpring({\n    config: {\n      mass: 55, //+ (Math.random() - 0.5) * 100,\n      friction: 100, //+ (Math.random() - 0.5) * 100,\n      tension: 250 //+ (Math.random() - 0.5) * 100\n    },\n    from: { answer: 0 },\n    to: { answer },\n    ref: correctScoreRef\n  });\n  return (\n    <CorrectScore\n      name={name}\n      value={props.answer.interpolate(x => x.toFixed())}\n    />\n  );\n};\nconst RoundResponses = ({ responses }) => {\n  const sortedResults = R.sortBy(R.prop(\"score\"), responses);\n  const { trailsRef, setDone } = useContext(Context);\n  const trail = useTrail(sortedResults.length, {\n    config: config.molasses,\n    transform: \"translate3d(0px,0,0)\",\n    opacity: 1,\n    from: { transform: \"translate3d(150px,0,0)\", opacity: 0 },\n    ref: trailsRef,\n    onRest: () => setDone(true)\n  });\n\n  return (\n    <ul>\n      {trail.map((props, ix) => {\n        return (\n          <animated.li key={ix} style={props}>\n            {sortedResults[ix].user}: {sortedResults[ix].value}\n            <Score value={sortedResults[ix].score} />\n          </animated.li>\n        );\n      })}\n    </ul>\n  );\n};\n\nconst RoundSummaryBtnGroup = ({ onNextRound, onEndGame }) => {\n  const { done } = useContext(Context);\n  if (done) {\n    return (\n      <div className=\"btn-group\">\n        <button className=\"btn\" onClick={onNextRound}>\n          next round\n        </button>\n        <button className=\"btn\" onClick={onEndGame}>\n          end game\n        </button>\n      </div>\n    );\n  }\n  return null;\n};\nconst RoundSummary = ({ children }) => {\n  const correctScoreRef = useRef();\n  const trailsRef = useRef();\n  const [done, setDone] = useState(false);\n  useChain([correctScoreRef, trailsRef], [0, 1], 7000);\n  return (\n    <Context.Provider value={{ correctScoreRef, trailsRef, done, setDone }}>\n      {children}\n    </Context.Provider>\n  );\n};\n\nRoundSummary.BtnGroup = RoundSummaryBtnGroup;\nRoundSummary.Answer = RoundAnswer;\nRoundSummary.Ranking = RoundResponses;\nexport default RoundSummary;\n","import React from \"react\";\nimport RoomScore from \"./RoomScore\";\nimport Round from \"./Round\";\nimport UserList from \"../components/UserList\";\n\nconst Room = ({ children }) => {\n  return (\n    <div className=\"flex flex-col justify-center items-center w-full pb-0\">\n      {children}\n    </div>\n  );\n};\n\nRoom.Round = Round;\nRoom.Score = RoomScore;\nRoom.UserList = UserList;\nexport default Room;\n","import { useMutation } from \"@apollo/react-hooks\";\nimport * as L from \"partial.lenses\";\nimport React, { useContext } from \"react\";\nimport { StateContext } from \"../app-state\";\nimport * as docs from \"../documents\";\nimport { collectResults } from \"../utils\";\nimport RoundQuestionCard from \"./RoundQuestionCard\";\nimport RoundSummary from \"./RoundSummary\";\n\nconst Round = ({ data, userResponse, roundOver }) => {\n  const { user } = useContext(StateContext);\n\n  const [submitResponse] = useMutation(docs.SUBMIT_RESPONSE_FOR_QUESTION);\n  const [nextRound] = useMutation(docs.NEXT_ROUND_MUTATION);\n  const onNextRound = () => {\n    nextRound({ variables: { roomId: data.room.id } });\n  };\n  // TODO: handle game end, game summary and then have user leave room\n  const onEndGame = () => console.log(\"done.\");\n  const answer = L.get([\"answer\", \"score\", \"rottenTomatoes\"], data);\n  const collectRoundResults = collectResults(user, answer);\n  if (data.answer && roundOver) {\n    return (\n      <RoundSummary>\n        <RoundSummary.Answer name={data.name} answer={answer} />\n        <RoundSummary.Ranking responses={collectRoundResults(data.responses)} />\n        <RoundSummary.BtnGroup\n          onNextRound={onNextRound}\n          onEndGame={onEndGame}\n        />\n      </RoundSummary>\n    );\n  } else if (!userResponse) {\n    return (\n      <RoundQuestionCard\n        name={data.name}\n        description={data.description}\n        id={data.id}\n        userId={user.id}\n        imgSrc={data.imageUrl}\n        onSubmit={submitResponse}\n      />\n    );\n  } else {\n    return <span>Current Answer: {userResponse.value}</span>;\n  }\n};\n\nexport default Round;\n","import React from \"react\";\nimport { Route } from \"react-router-dom\";\nimport { StateContext } from \"./app-state\";\nimport MovieSearchInput from \"./components/MovieSearchInput\";\nimport RoomCreateForm from \"./components/RoomCreateForm\";\nimport RoomJoinForm from \"./components/RoomJoinForm\";\nimport RoundQuestionCard from \"./components/RoundQuestionCard\";\nimport UserList from \"./components/UserList\";\nimport Room from \"./components/Room\";\n\nconst ComponentsWithMocks = () => {\n  const users = [\n    { name: \"Carol\", id: \"carol-id\" },\n    { name: \"Bob\", id: \"bob-id\" },\n    { name: \"Bob\", id: \"bob-id\" },\n    { name: \"Bob\", id: \"bob-id\" },\n    { name: \"Bob\", id: \"bob-id\" },\n    { name: \"Bob\", id: \"bob-id\" }\n  ];\n  return (\n    <StateContext.Provider value={{ user: { id: \"user-id\", name: \"Frank\" } }}>\n      <Route path=\"/components/join\" component={RoomJoinForm} />\n      <Route path=\"/components/create\" component={RoomCreateForm} />\n      <Route path=\"/components/users\">\n        <UserList data={users} />\n      </Route>\n      <Route path=\"/components/question\">\n        <RoundQuestionCard data={{ id: \"some-id\" }} />\n      </Route>\n      <Route path=\"/components/search\" component={MovieSearchInput} />\n      <Route path=\"/components/room\">\n        <Room\n          data={{\n            name: \"ABCD\",\n            questions: [\n              {\n                // name: \"The Terminal\",\n                // imageUrl:\n                //   \"https://upload.wikimedia.org/wikipedia/en/8/86/Movie_poster_the_terminal.jpg\",\n                name: \"The Matrix\",\n                imageUrl:\n                  \"https://upload.wikimedia.org/wikipedia/en/c/c1/The_Matrix_Poster.jpg\",\n                description:\n                  'The Matrix is a 1999 science fiction action film[3][4] written and directed by the Wachowskis.[a] It stars Keanu Reeves, Laurence Fishburne, Carrie-Anne Moss, Hugo Weaving, and Joe Pantoliano and is the first installment in the Matrix franchise. It depicts a dystopian future in which humanity is unknowingly trapped inside a simulated reality, the Matrix, created by intelligent machines to distract humans while using their bodies as an energy source.[5] When computer programmer Thomas Anderson, under the hacker alias \"Neo\", uncovers the truth, he \"is drawn into a rebellion against the machines\"[5] along with other people who have been freed from the Matrix.',\n                responses: [{ owner: { id: \"carol-id\" } }]\n              }\n            ],\n            round: 0,\n            users\n          }}\n        />\n      </Route>\n    </StateContext.Provider>\n  );\n};\n\nexport default ComponentsWithMocks;\n","import { useHistory } from \"react-router-dom\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { StateContext } from \"../app-state\";\n\nconst HomePage = () => {\n  const [state, setState] = useState();\n  const { user } = useContext(StateContext);\n  const history = useHistory();\n  useEffect(() => {\n    if (state === \"join\") {\n      history.push(\"/join\");\n    } else if (state === \"create\") {\n      history.push(\"/create\");\n    }\n  }, [state, history]);\n  return (\n    <div className=\"px-10\">\n      <h1>{user ? `${user.name}, d` : \"D\"}o you want to play a game?</h1>\n      <div className=\"btn-group\">\n        <button className=\"btn\" onClick={() => setState(\"create\")}>\n          create\n        </button>\n        <button className=\"btn\" onClick={() => setState(\"join\")}>\n          join\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default HomePage;\n","import { useMutation } from \"@apollo/react-hooks\";\nimport * as R from \"ramda\";\nimport * as L from \"partial.lenses\";\nimport { default as React, useContext, useEffect, useState } from \"react\";\nimport RoomCreateForm from \"../components/RoomCreateForm\";\nimport { StateContext } from \"../app-state\";\nimport * as docs from \"../documents\";\nimport { useHistory } from \"react-router-dom\";\nimport { generateCode } from \"../utils\";\n\nconst RoomCreatePage = () => {\n  const history = useHistory();\n  const { user, setUser } = useContext(StateContext);\n  const [state, setState] = useState({\n    userName: undefined,\n    roomCode: undefined\n  });\n  const [createRoom, roomCreated] = useMutation(docs.CREATE_ROOM_MUTATION);\n  const [createRoomExistingUser, roomCreatedExistingUser] = useMutation(\n    docs.INSERT_ROOM_EXISTING_USER\n  );\n\n  useEffect(() => {\n    if (user && !user.room) {\n      createRoomExistingUser({\n        variables: {\n          userName: user.name,\n          userId: user.id,\n          roomName: generateCode()\n        }\n      });\n    }\n  }, [user, createRoomExistingUser]);\n\n  useEffect(() => {\n    if (roomCreatedExistingUser.data) {\n      setUser(\n        L.set(\n          \"room\",\n          R.pick(\n            [\"name\", \"id\"],\n            roomCreatedExistingUser.data.insert_room.returning[0]\n          )\n        )\n      );\n    }\n  }, [roomCreatedExistingUser.data, setUser]);\n\n  useEffect(() => {\n    if (state.userName && state.roomCode) {\n      createRoom({\n        variables: { userName: state.userName, roomName: state.roomCode }\n      });\n    }\n  }, [state.roomCode, state.userName, createRoom]);\n\n  useEffect(() => {\n    if (roomCreated.data) {\n      setUser(roomCreated.data.insert_user.returning[0]);\n    }\n  }, [roomCreated, setUser]);\n\n  const handleSubmit = (e, { name, code }) => {\n    e.preventDefault();\n    setState(R.mergeLeft({ userName: name, roomCode: code }));\n  };\n\n  const handleCancel = () => history.push(\"/\");\n\n  return (\n    <RoomCreateForm handleSubmit={handleSubmit} handleCancel={handleCancel} />\n  );\n};\n\nexport default RoomCreatePage;\n","import { useMutation, useLazyQuery } from \"@apollo/react-hooks\";\nimport * as R from \"ramda\";\nimport { default as React, useContext, useEffect, useState } from \"react\";\nimport { StateContext } from \"../app-state\";\nimport * as docs from \"../documents\";\nimport RoomJoinForm from \"../components/RoomJoinForm\";\nimport { useHistory } from \"react-router-dom\";\nimport * as L from \"partial.lenses\";\n\nconst useExistingUserLogic = ({ userId, roomId }) => {\n  const [userJoinRoom, resp] = useMutation(\n    docs.EXISTING_USER_JOIN_ROOM_MUTATION\n  );\n  useEffect(() => {\n    if (roomId && userId) {\n      userJoinRoom({ variables: { id: userId, roomId: roomId } });\n    }\n  }, [roomId, userId, userJoinRoom]);\n  return L.get([\"data\", \"update_user\", \"returning\", 0], resp);\n};\n\nconst useNewUserLogic = ({ userName, roomId }) => {\n  const [createUserAndJoinRoom, resp] = useMutation(docs.JOIN_ROOM_MUTATION);\n  useEffect(() => {\n    if (roomId && userName) {\n      createUserAndJoinRoom({\n        variables: { name: userName, roomId: roomId }\n      });\n    }\n  }, [roomId, userName, createUserAndJoinRoom]);\n  return L.get([\"data\", \"insert_user\", \"returning\", 0], resp);\n};\n\nconst RoomJoinPage = () => {\n  const history = useHistory();\n  const { user, setUser } = useContext(StateContext);\n  const [state, setState] = useState({\n    userName: undefined,\n    roomCode: undefined,\n    roomId: undefined\n  });\n  const [queryRoom, roomQuery] = useLazyQuery(docs.ROOM_BY_NAME_QUERY);\n\n  useEffect(() => {\n    if (state.roomCode) {\n      queryRoom({ variables: { name: state.roomCode } });\n    }\n  }, [state.roomCode, queryRoom]);\n\n  useEffect(() => {\n    if (!roomQuery.loading) {\n      if (roomQuery.data && roomQuery.data.room.length) {\n        setState(R.mergeLeft({ roomId: roomQuery.data.room[0].id }));\n      }\n    }\n  }, [roomQuery]);\n\n  const newUserData = useNewUserLogic(state);\n  const existingUserData = useExistingUserLogic({\n    userId: L.get(\"id\", user),\n    ...state\n  });\n\n  const userData = user ? existingUserData : newUserData;\n\n  useEffect(() => {\n    if (userData) {\n      setUser(userData);\n    }\n  }, [userData, setUser]);\n\n  const handleSubmit = (e, { name, code }) => {\n    e.preventDefault();\n    setState(R.mergeLeft({ userName: name, roomCode: code }));\n  };\n\n  const handleCancel = () => history.push(\"/\");\n\n  return (\n    <RoomJoinForm\n      handleSubmit={handleSubmit}\n      handleCancel={handleCancel}\n      userName={user && user.name}\n    >\n      {!user && <RoomJoinForm.NameInput />}\n      <RoomJoinForm.CodeInput />\n    </RoomJoinForm>\n  );\n};\n\nexport default RoomJoinPage;\n","import React, { useEffect, useReducer } from \"react\";\nimport MovieSearchInput from \"./MovieSearchInput\";\n\nconst searchUrl = title =>\n  `${process.env.REACT_APP_SEARCH_URL || \"\"}/parse/${title}`;\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case \"FETCH\": {\n      return { ...state, value: \"loading\", selection: action.payload };\n    }\n    case \"FAILURE_NOT_FOUND\": {\n      return {\n        ...state,\n        value: \"failure\",\n        message: \"Score not found. Please select a different movie.\"\n      };\n    }\n    case \"FAILURE_ERROR\": {\n      return {\n        ...state,\n        value: \"failure\",\n        message: \"Something went wrong. Please try again.\"\n      };\n    }\n    case \"RETRY\": {\n      return { value: \"idle\", response: null, selection: null, error: null };\n    }\n    case \"SUCCESS\": {\n      return { ...state, value: \"success\", response: action.payload };\n    }\n    case \"SUBMITTED\": {\n      return { ...state, value: \"idle\" };\n    }\n    default: {\n      return state;\n    }\n  }\n};\n\nconst MovieSearch = ({ onSelection }) => {\n  const [current, dispatch] = useReducer(reducer, {});\n  useEffect(() => {\n    if (current.value === \"loading\") {\n      console.log(\"selection??\", current);\n      fetch(searchUrl(current.selection), {\n        headers: {\n          \"Content-Type\": \"application/json\"\n          // 'Content-Type': 'application/x-www-form-urlencoded',\n        }\n      })\n        .then(async resp => {\n          const json = await resp.json();\n          if (json.reception.score.rottenTomatoes) {\n            dispatch({ type: \"SUCCESS\", payload: json });\n          } else {\n            dispatch({ type: \"FAILURE_NOT_FOUND\" });\n          }\n        })\n        .catch(err => {\n          console.log(\"error!\", err);\n          dispatch({ type: \"FAILURE_ERROR\" });\n        });\n    } else if (current.value === \"success\") {\n      onSelection(current.response);\n      dispatch({ type: \"SUBMITTED\" });\n    }\n  }, [current, onSelection]);\n  if (current.value === \"failure\") {\n    return (\n      <div>\n        <h3>{current.message}</h3>\n        <button className=\"btn\" onClick={() => dispatch({ type: \"RETRY\" })}>\n          try again\n        </button>\n      </div>\n    );\n  }\n  return (\n    <MovieSearchInput\n      state={current.value}\n      onSelect={title => dispatch({ type: \"FETCH\", payload: title })}\n    />\n  );\n};\n\nexport default MovieSearch;\n","import { useMutation, useSubscription } from \"@apollo/react-hooks\";\nimport { Link } from \"@reach/router\";\nimport * as L from \"partial.lenses\";\nimport * as R from \"ramda\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { StateContext } from \"../app-state\";\nimport MovieSearch from \"../components/MovieSearch\";\nimport Room from \"../components/Room\";\nimport * as docs from \"../documents\";\n\nconst RoomPage = ({\n  match: {\n    params: { name }\n  }\n}) => {\n  const { user } = useContext(StateContext);\n  const [roundOver, setRoundOver] = useState(false);\n  const resp = useSubscription(docs.SUBSCRIBE_TO_ROOM_BY_NAME, {\n    variables: { name }\n  });\n  const [submitQuestion] = useMutation(docs.SUBMIT_QUESTION_MUTATION);\n  const onQuestionSelect = json => {\n    submitQuestion({\n      variables: {\n        roomId: room.id,\n        description: json.description,\n        imageUrl: json.poster,\n        name: json.title,\n        answer: json.reception\n      }\n    });\n  };\n  const room = L.get([\"data\", \"room\", 0], resp);\n  const round = L.get([\"questions\", R.propOr(0, \"round\", room)], room);\n\n  useEffect(() => {\n    if (\n      round &&\n      L.get([\"users\", \"length\"], room) === L.get([\"responses\", \"length\"], round)\n    ) {\n      setRoundOver(true);\n    } else {\n      setRoundOver(false);\n    }\n  }, [round, room, setRoundOver]);\n  if (resp.loading) {\n    return \"Loading...\";\n  }\n  const questions = L.collect([\n    L.elems,\n    L.pick({\n      answer: [\"answer\", \"score\", \"rottenTomatoes\"],\n      response: {\n        value: [\"responses\", L.whereEq({ owner: { id: user.id } }), \"value\"]\n      }\n    })\n  ])(room.questions);\n  const userResponse = L.get(\n    [\"responses\", L.whereEq({ owner: { id: user.id } })],\n    round\n  );\n\n  // TODO: lift logic that transforms users to include bool for hasAnswer in the component instead of\n  // Room.UserList, that way we don't have to pass down responses\n\n  return (\n    <Room>\n      <span className=\"fixed top-0 my-2 inline-flex\">\n        <h1>\n          {room.name} -{\" \"}\n          <Link\n            className=\"text-blue-700 hover:text-blue-400\"\n            to={`/#/login/${user.id}`}\n          >\n            your login link\n          </Link>\n        </h1>\n      </span>\n      {round ? (\n        <Room.Round\n          data={round}\n          roomId={room.id}\n          userResponse={userResponse}\n          nUsers={room.users.length}\n          roundOver={roundOver}\n          setRoundOver={setRoundOver}\n        />\n      ) : (\n        <>\n          <MovieSearch roomId={room.id} onSelection={onQuestionSelect} />{\" \"}\n          {!(L.get(\"answer\", round) && userResponse && roundOver) && (\n            <Room.Score data={questions} />\n          )}\n        </>\n      )}\n      <Room.UserList\n        data={room.users}\n        responses={R.propOr([], \"responses\", room.questions[room.round])}\n      />\n    </Room>\n  );\n};\n\nexport default RoomPage;\n","import { useQuery } from \"@apollo/react-hooks\";\nimport { useContext, useEffect } from \"react\";\nimport { StateContext } from \"../app-state\";\nimport * as docs from \"../documents\";\nconst RoomPage = ({\n  match: {\n    params: { id }\n  }\n}) => {\n  const { setUser } = useContext(StateContext);\n  const { data, loading, error } = useQuery(docs.USER_LOGIN, {\n    variables: { id }\n  });\n  useEffect(() => {\n    if (data && !error) {\n      setUser(data.user_by_pk);\n    }\n  }, [data, setUser, error]);\n  if (loading) {\n    return \"Loggin in...\";\n  }\n  if (error) {\n    return \"User not found :(\";\n  }\n  return null;\n};\n\nexport default RoomPage;\n","import React from \"react\";\nimport { Redirect, Route } from \"react-router-dom\";\n\nconst ProtectedRoute = ({ component: Comp, loggedIn, path, ...rest }) => {\n  return (\n    <Route\n      path={path}\n      {...rest}\n      render={props => {\n        return loggedIn ? <Comp {...props} /> : <Redirect to=\"/\" />;\n      }}\n    />\n  );\n};\n\nexport default ProtectedRoute;\n","import React, { useContext } from \"react\";\nimport { ApolloProvider } from \"react-apollo\";\nimport ReactDOM from \"react-dom\";\nimport { HashRouter as Router, Route, Switch } from \"react-router-dom\";\nimport { StateContext, StateProvider } from \"./app-state\";\nimport client from \"./client\";\nimport ComponentsWithMocks from \"./components-with-mocks\";\nimport HomePage from \"./pages/HomePage\";\nimport RoomCreatePage from \"./pages/RoomCreatePage\";\nimport RoomJoinPage from \"./pages/RoomJoinPage\";\nimport RoomPage from \"./pages/RoomPage\";\nimport UserPage from \"./pages/UserPage\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport \"./styles/index.css\";\n\nimport \"./styles/custom.css\";\n\nconst Routes = () => {\n  const { user } = useContext(StateContext);\n  return (\n    <div className=\"app\">\n      <Route path=\"/\" exact>\n        <HomePage />\n      </Route>\n      <ComponentsWithMocks />\n      <Route path=\"/join\" component={RoomJoinPage} />\n      <Route path=\"/create\" component={RoomCreatePage} />\n      <Route path=\"/login/:id\" component={UserPage} />\n      <ProtectedRoute\n        path=\"/room/:name\"\n        component={RoomPage}\n        loggedIn={user ? true : false}\n      />\n    </div>\n  );\n};\n\nfunction App() {\n  return (\n    <ApolloProvider client={client}>\n      <Router basename=\"/\">\n        <Switch>\n          <StateProvider>\n            <Routes />\n          </StateProvider>\n        </Switch>\n      </Router>\n    </ApolloProvider>\n  );\n}\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(<App />, rootElement);\n"],"sourceRoot":""}